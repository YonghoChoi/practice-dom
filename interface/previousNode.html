<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="../common/log.js" charset="utf-8"></script>
  </head>
  <body>
    <ul id="sports">리스트
      <li id="id11">ID-11</li>
      <li id="id12">ID-12
        <ul id="ul2">
          <li id="id121">ID-121</li>
          <li id="id122">ID-122</li>
        </ul>
      </li>
      <li id="id13">ID-13</li>
    </ul>

    <script type="text/javascript">
      debugger;
      var iteratorObj = document.createNodeIterator(
        document.getElementById('sports'),
        NodeFilter.SHOW_ELEMENT,  // ELEMENT만 필터
        function(node) {    // nextNode시 function 수행
          debugger;
          if(node.nodeName === 'LI') {
            return NodeFilter.FILTER_ACCEPT;    // 필터링 통과
          } else {
            return NodeFilter.FILTER_REJECT;    // 필터링 미통과
          }
        }, false  // IE 때문에 필요한 파라미터
      );

      // createNodeIterator()의 첫 번째 파라미터의 엘리먼트를 filter 함수를 호출하면서 파라미터로 넘겨준다.
      var count = 1;
      var node = iteratorObj.nextNode();
      while(node) {
        debugger;
        js.log('id : ', node.id);
        if(count > 2) {
          node = iteratorObj.previousNode();
          if(!node) {
            js.log('iteration end.')
          } else {
            js.log('id : ', node.id);
          }
        } else {
          node = iteratorObj.nextNode();
          count += 1;
        }
      }
    </script>
  </body>
</html>
